# version: '3.8' # Versión de Compose (opcional pero recomendada)

services:
  db:
    image: postgres:16-alpine # Imagen de PostgreSQL ligera
    container_name: monedaflow_db
    restart: always
    environment:
      # Estos valores DEBEN coincidir con los de tu archivo .env
      POSTGRES_USER: monedaflow_user
      POSTGRES_PASSWORD: monedaflow_pass
      POSTGRES_DB: monedaflow
    
    # Mapeo de puertos: 
    # Expone el puerto 5432 del contenedor al puerto 5432 del host.
    # Esto es CRUCIAL para que tu app local (npm run dev) se conecte usando 'localhost:5432'.
    ports:
      - "5433:5432"
      
    # Volumen: Persistencia de datos
    volumes:
      - postgres_data:/var/lib/postgresql/data

  # NOTA: No incluimos un servicio 'app' aquí, ya que ejecutas tu aplicación 
  # directamente en el host (npm run dev), lo cual es más rápido para el desarrollo.

# Definición de volúmenes para persistencia
volumes:
  postgres_data: